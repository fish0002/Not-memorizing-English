<scroll-view class="scrollarea" scroll-y type="list">
  <view class="container">
    <!-- é¡¶éƒ¨è¿›åº¦æ¡ -->
    <view class="progress-bar">
      <progress percent="{{progress.percent}}" stroke-width="3" color="#07c160" />
      <view class="progress-text">ä»Šæ—¥è¿›åº¦ï¼š{{progress.current}}/{{progress.total}}</view>
    </view>

    <!-- å½“å‰çº§åˆ«é€‰æ‹© -->
    <view class="level-info">
      <picker bindchange="handleLevelChange" value="{{levelIndex}}" range="{{levelList}}">
        <view class="level-picker">
          <text class="level-text">å½“å‰çº§åˆ«ï¼š{{currentLevel}}</text>
          <text class="picker-arrow">â–¼</text>
        </view>
      </picker>
    </view>

    <!-- å•è¯å±•ç¤ºåŒºåŸŸ -->
    <view class="word-card">
      <!-- å•è¯æœ¬ä½“ -->
      <view class="word-main">
        <text class="word-text">{{currentWord.word}}</text>
        <text class="phonetic">{{currentWord.phonetic}}</text>
        <view class="sound-icon" bindtap="playPronunciation">ğŸ”Š</view>
      </view>

      <!-- ç¿»è¯‘åŒºåŸŸ -->
      <view class="translation-area" wx:if="{{showTranslation}}">
        <block wx:for="{{currentWord.translations}}" wx:key="pos">
          <view class="trans-item">
            <text class="pos">{{item.pos}}.</text>
            <text class="meaning">{{item.meaning}}</text>
          </view>
        </block>
      </view>

      <!-- ä¾‹å¥åŒºåŸŸ -->
      <view class="examples-area" wx:if="{{showExamples}}">
        <block wx:for="{{currentWord.translations[0].examples}}" wx:key="en">
          <view class="example-item">
            <text class="en-text">{{item.en}}</text>
            <text class="zh-text">{{item.zh}}</text>
          </view>
        </block>
      </view>

      <!-- è¯æ ¹åˆ†æåŒºåŸŸ -->
      <view class="analysis-area" wx:if="{{showAnalysis}}">
        <view class="roots" wx:if="{{currentWord.roots}}">
          <text class="title">è¯æ ¹åˆ†æï¼š</text>
          <text class="content">{{currentWord.roots.explanation}}</text>
        </view>
        <view class="mnemonics" wx:if="{{currentWord.mnemonics}}">
          <text class="title">è®°å¿†æŠ€å·§ï¼š</text>
          <text class="content">{{currentWord.mnemonics}}</text>
        </view>
        <view class="usage" wx:if="{{currentWord.usageNote}}">
          <text class="title">ç”¨æ³•è¯´æ˜ï¼š</text>
          <text class="content">{{currentWord.usageNote}}</text>
        </view>
      </view>

      <!-- æ“ä½œæŒ‰é’®åŒºåŸŸ -->
      <view class="button-group">
        <button class="btn show-trans" bindtap="showTranslation" wx:if="{{!showTranslation}}">
          æ˜¾ç¤ºé‡Šä¹‰
        </button>
        <button class="btn show-example" bindtap="showExamples" wx:if="{{showTranslation && !showExamples}}">
          æ˜¾ç¤ºä¾‹å¥
        </button>
        <button class="btn show-analysis" bindtap="showAnalysis" wx:if="{{showExamples && !showAnalysis}}">
          è¯æ ¹åˆ†æ
        </button>
      </view>

      <!-- è®¤è¯†/ä¸è®¤è¯†æŒ‰é’® -->
      <view class="word-actions">
        <button class="btn known" bindtap="handleKnown">è®¤è¯†</button>
        <button class="btn unknown" bindtap="handleUnknown">ä¸è®¤è¯†</button>
      </view>
    </view>

    <!-- æ‹¼å†™æ£€éªŒæ¨¡å¼ -->
    <view class="spelling-mode" wx:if="{{isSpellingMode}}">
      <view class="spelling-word">
        <text class="meaning">{{spellingWords[spellingIndex].translations[0].meaning}}</text>
      </view>
      <input class="spelling-input" 
             type="text" 
             placeholder="è¯·è¾“å…¥å•è¯æ‹¼å†™" 
             value="{{spellingInput}}"
             bindinput="handleSpellingInput"/>
      <button class="btn check-spelling" bindtap="checkSpelling">æ£€æŸ¥æ‹¼å†™</button>
      <view class="spelling-result" wx:if="{{spellingResult}}">
        {{spellingResult}}
      </view>
    </view>

    <!-- æ™®é€šå­¦ä¹ æ¨¡å¼ -->
    <view wx:else>
      <view class="mode-indicator" wx:if="{{isReviewMode}}">
        <text class="mode-text">å¤ä¹ æ¨¡å¼</text>
        <text class="review-progress">{{reviewIndex}}/{{unknownWords.length}}</text>
      </view>

      <view class="review-btn-area">
        <button class="review-btn" bindtap="toggleReviewMode">
          {{isReviewMode ? 'é€€å‡ºå¤ä¹ ' : 'å¤ä¹ ç”Ÿè¯'}}
          <text class="unknown-count" wx:if="{{!isReviewMode && unknownWords.length > 0}}">{{unknownWords.length}}</text>
        </button>
      </view>
    </view>

    <!-- åº•éƒ¨å¯¼èˆª -->
    <view class="nav-buttons">
      <button class="btn prev" bindtap="handlePrevWord">ä¸Šä¸€ä¸ª</button>
      <button class="btn review" bindtap="toggleReviewMode">
        {{isReviewMode ? 'é€€å‡ºå¤ä¹ ' : 'å¤ä¹ ç”Ÿè¯'}}
        <text class="unknown-count" wx:if="{{!isReviewMode && unknownWords.length > 0}}">
          {{unknownWords.length}}
        </text>
      </button>
      <button class="btn next" bindtap="handleNextWord">ä¸‹ä¸€ä¸ª</button>
    </view>
  </view>
</scroll-view> 